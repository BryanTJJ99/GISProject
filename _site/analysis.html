<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Urban Sensing With Satellites - Jurong Lake District - Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Urban Sensing With Satellites - Jurong Lake District</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data_preparation.html">Data Preparation</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./analysis.html" aria-current="page">Analysis</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./poster.html">Poster</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./documentation.html">Documentation</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">About The Team</a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#false-colour-composite" id="toc-false-colour-composite" class="nav-link active" data-scroll-target="#false-colour-composite">False Colour Composite</a></li>
  <li><a href="#normalized-difference-vegetation-index-ndvi" id="toc-normalized-difference-vegetation-index-ndvi" class="nav-link" data-scroll-target="#normalized-difference-vegetation-index-ndvi">Normalized Difference Vegetation Index (NDVI)</a></li>
  <li><a href="#classification-using-random-forest" id="toc-classification-using-random-forest" class="nav-link" data-scroll-target="#classification-using-random-forest">Classification using Random Forest</a></li>
  <li><a href="#class-to-class-change-analysis-2018-and-2022" id="toc-class-to-class-change-analysis-2018-and-2022" class="nav-link" data-scroll-target="#class-to-class-change-analysis-2018-and-2022">Class-to-Class Change Analysis (2018 and 2022)</a></li>
  <li><a href="#unravelling-the-area-of-land-cover-change-by-class-km2" id="toc-unravelling-the-area-of-land-cover-change-by-class-km2" class="nav-link" data-scroll-target="#unravelling-the-area-of-land-cover-change-by-class-km2">Unravelling the area of land cover change by class (<strong>km<sup>2</sup></strong>)</a></li>
  <li><a href="#evaluating-the-accuracy-of-our-results" id="toc-evaluating-the-accuracy-of-our-results" class="nav-link" data-scroll-target="#evaluating-the-accuracy-of-our-results">Evaluating the accuracy of our results</a></li>
  <li><a href="#addressing-some-limitations-and-constraints-of-our-analysis" id="toc-addressing-some-limitations-and-constraints-of-our-analysis" class="nav-link" data-scroll-target="#addressing-some-limitations-and-constraints-of-our-analysis">Addressing some limitations and constraints of our analysis</a></li>
  <li><a href="#recommendations" id="toc-recommendations" class="nav-link" data-scroll-target="#recommendations">Recommendations</a></li>
  <li><a href="#potential-future-work" id="toc-potential-future-work" class="nav-link" data-scroll-target="#potential-future-work">Potential Future Work</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analysis</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>As mentioned in our Overview, the focus of our analysis is to detect the land cover change - particularly how much vegetation - has been lost to development over the years of 2018 to 2022. In a step-by-step approach towards our analysis, we will discuss the different key insights and statistics obtained using different analytical materials created in our data preparation process.</p>
<section id="false-colour-composite" class="level1">
<h1>False Colour Composite</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-D71077B2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 1 - FCC images over 2018-2022</figcaption><p></p>
</figure>
</div>
<p>Firstly, the False Colour Composite Scheme (FCC) is used to reveal or enhance features otherwise invisible or poorly visible to a human eye. FCC is most commonly used in assessing the plant density and their health, given that vegetation reflect near infrared and green light, while absorbing red. Given that they reflect more near infrared than green, plant-covered land appears deep red, with denser plant growth being a shade darker. The dark blue/black area represents the water body, and the lighter shades represent the urban built up places or bare land.</p>
<p>In Figure 1 above, We observe that there are the red areas denoting vegetation in each period over 2018-2022 is relatively significant and distinguishable. However, it is unfeasible to discern the changes in vegetation cover over the 5 years purely by observation using our naked eye.</p>
</section>
<section id="normalized-difference-vegetation-index-ndvi" class="level1">
<h1>Normalized Difference Vegetation Index (NDVI)</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-6F79A671.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 2 - NDVI images over 2018-2022</figcaption><p></p>
</figure>
</div>
<p>We also created <strong>normalized difference vegetation index (NDVI)</strong> raster images, which is an indicator that can be used to analyze remote sensing measurements, assessing whether or not the target being observed contains live green vegetation. How this works is that It normalizes the green leaf scattering in Near Infra-red wavelengths with chlorophyll absorption in red wavelengths. For Sentinel 2 data, we utilize Bands 4 (10m resolution, 665 nm wavelength, Red) and 8 (10m resolution, 842 nm wavelength, Visible and Near Infrared) to create the NDVI images, with the formula as shown below:</p>
<p><span class="math display">\[
NDVI = \frac{B8 - B4}{B8 + B4}
\]</span></p>
<p>As seen in Figure 2, the darker shades of green are strong indicators of vegetation. However, similar to Figure 1, it is difficult to discern the changes in vegetation cover over the 5 years purely by observation, which is the focus of our analysis.</p>
</section>
<section id="classification-using-random-forest" class="level1">
<h1>Classification using Random Forest</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-863B07F0.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 3 - Classification of raster layers from 2018 to 2022</figcaption><p></p>
</figure>
</div>
<p>As mentioned in our data preparation process, we classified each of the years using 5 different class categories (water body, vegetation, built up, bare land, impervious surfaces) to detect the extent of each of their land cover. The approach we used to obtain the classification is different from what was taught in class, where we <strong>complemented the SCP plugin (for obtain statistical results) with the use of another plugin known as Dzetsaka (to conduct the classification)</strong>. The Dzetsaka plugin provided a greater array of supervised classification algorithms for us to utilize, including SVD, Random Forest, KNN and Gaussian Mixture Model. After testing the different algorithms for classification and evaluating their producer accuracy and kappa statistics (which we will discuss in greater depth later), we concluded that the Random Forest Classifier gives the most optimal results.</p>
<p>The Random Forest (RF) algorithm is a supervised classification algorithm, which builds upon the concept of decision trees, where it relies on many self-learning decision trees (i.e.&nbsp;"Forest"), so that many base learners can come to one strong and robust decision compared to a single decision tree. For more information on this particular algorithm for image classification, do visit this site <a href="https://pages.cms.hu-berlin.de/EOL/geo_rs/S09_Image_classification2.html#:~:text=Background-,Random%20Forest%20Classifier,(i.e.%20%E2%80%9CForest%E2%80%9D).">here</a>.</p>
</section>
<section id="class-to-class-change-analysis-2018-and-2022" class="level1">
<h1>Class-to-Class Change Analysis (2018 and 2022)</h1>
<p>We next take a step further, by creating a visual representation of the change in class types between the years 2018 and 2022. The motivation behind this so that it is easier to observe the changes in land cover - particularly so to see what land covers have been changed to vegetation in the 5 years, and vice versa.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-E0B367B9.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 4 - Other classes to vegetation</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-56B244B5.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 5 - Vegetation to other classes</figcaption><p></p>
</figure>
</div>
<p>Just by visually comparing between Figures 4 and 5, we can noticeably observe how the area of land cover change away from vegetation (Figure 5) is drastically greater than the area of land cover change to vegetation (Figure 4). More significantly, we observe in Figure 5 that a large extent of the land cover changes is from the loss of vegetation towards new built up areas, as denoted by the red pixels. This is in tandem with the hypothesis that more vegetated land spaces have been given way towards development of the Jurong Lake District.</p>
</section>
<section id="unravelling-the-area-of-land-cover-change-by-class-km2" class="level1">
<h1>Unravelling the area of land cover change by class (<strong>km<sup>2</sup></strong>)</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-CA929532.png" class="img-fluid figure-img" width="478"></p>
<p></p><figcaption class="figure-caption">Figure 6 - land cover changes of different classes from 2018-2022 (in square kilometers)</figcaption><p></p>
</figure>
</div>
<p>Using the SCP post-processing classification report, we derive the area of land cover for each of the 5 classes over 2018-2022, with the numerical values representing the land area in <span class="math inline">\(km^2\)</span> . Over the period of the 5 years, we observe that while the area of land cover for water body, bare land and impervious surfaces have remained relatively similar, there is a distinguishable and clear <strong>inverse relationship</strong> between vegetation and built-up areas. This is observed as the <strong>decrease in vegetation area</strong> by 3.08km² and <strong>increase in built-up area</strong> by 4.05km², This validates our hypothesis, given that land in Jurong Lake District is being zoned for transformation into the largest mixed-use business district outside of the city centre.</p>
</section>
<section id="evaluating-the-accuracy-of-our-results" class="level1">
<h1>Evaluating the accuracy of our results</h1>
<p>We used 2 criteria to evaluate the accuracy and precision of our classification results, namely the Producer’s accuracy and the Kappa Statistic for each of the classes.</p>
<p><strong>Producer’s Accuracy</strong></p>
<ul>
<li>Ranging between 0-100%, the Producer’s Accuracy indicates how accurately the classification results meet the expectation of the creator. It is the probability that a certain land cover of an area on the ground is classified as such. In ensuring the accuracy of our classification is kept to a good standard, we benchmark our producer’s accuracy so that each of the classes achieved a minimum of around 70% for all the years.</li>
</ul>
<p><strong>Kappa Statistic of Agreement:</strong></p>
<ul>
<li><p>Ranging between -1 and 1, the Kappa Statistic measures the inter-rater reliability of the categorized classes, providing an overall assessment of classification’s accuracy, with 1 indicating perfect agreement. The formula for deriving the kappa statistic is as follows:</p>
<p><span class="math display">\[
Kappa = \frac{Observed Agreement−Chance Agreement}{1 - Chance Agreement}
\]</span></p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-3FB37CF3.png" class="img-fluid figure-img" width="574"></p>
<p></p><figcaption class="figure-caption">Figure 6 - Statistical report of our classification</figcaption><p></p>
</figure>
</div>
<p>From our statistical report in Figure 6, we have managed to achieve relatively high overall producer accuracy scores of &gt;70% for all the classes. As the kappa statistic accounts for false negatives and false positives, there will be a natural tendency for its value to be lower than the producer accuracy. When evaluating the kappa statistic for the different classes, we have been able to achieve relatively high scores for water body, vegetation and built up areas, while the scores for bare land and impervious surfaces are not as great. This is likely attributed to the fact that there was relatively greater difficulty in obtaining the shapfile polygons for these 2 classes when classifying the training sample.</p>
</section>
<section id="addressing-some-limitations-and-constraints-of-our-analysis" class="level1">
<h1>Addressing some limitations and constraints of our analysis</h1>
<section id="existence-of-cloud-cover-in-raster-images" class="level4">
<h4 class="anchored" data-anchor-id="existence-of-cloud-cover-in-raster-images">Existence of Cloud Cover in raster images</h4>
<ul>
<li><p>One of the major constraints we faced in classifying the raster data is the existence of cloud covers in the images, despite already selecting the best ‘cloud-free’ sentinel 2 dataset that can be found in the <a href="https://scihub.copernicus.eu/dhus/#/home">Copernicus Open Access Hub</a>. The existence of the cloud cover limits our ability to accurately classify regions which are being covered by the clouds. Cloud masking is also an unfeasible method for the purposes of classification due to the algorithm still being unable to accurately predict the underlying land cover once the clouds are removed.</p></li>
<li><p>One of the potential methods to circumvent this, while acknowledging its limitations, is to conduct image mosaicing by obtaining raster data where the dates taken are very close to each other (e.g.&nbsp;days apart), and piece the parts together that are cloud free. The limitation of this method is that there could potentially still be significant land cover changes between the dates in which the raster images are taken for mosaicing.</p></li>
</ul>
</section>
</section>
<section id="recommendations" class="level1">
<h1>Recommendations</h1>
<p>We acknowledge that using remote sensing to analyze the land cover change and specifically the loss of vegetation to other land uses for urban development is all but just one part of the assessment of what it means to be a ‘sustainable hub’. There are embedded nuances in determining and assessing the environmental cost when in comes to development, including the materials used for buildings in that region, the technologies used in improving water and energy efficiency, and more.</p>
<p>Nonetheless, to achieve URA’s vision for JLD as a sustainable urban hub, a balance should still be struck between the preservation of existing greenery and the development of new built areas. This will minimise disruptions to the local biodiversity and reduce urban heat, all while acting as protection for the mental well-being of the local populace.</p>
<p>Incorporating nature creatively within JLD’s mixed land use design could serve as a potential feasible solution towards reversing the loss of greenery. Taking inspiration from China’s Liuzhou Forest City, some novel ideas include greening every roof within the district, and cladding trees and plants over building façades (e.g.&nbsp;balconies).</p>
<p>Microforestry - also know as the <a href="https://www.sugiproject.com/blog/the-miyawaki-method-for-creating-forests">Miyawaki Method for Creating Forests</a> - is another concept which several cities (including <a href="https://www.ivn.nl/tinyforest/tiny-forest-worldwide/countries/the-netherlands">The Netherlands</a>) have adopted, which are forest the size of a tennis court that are being planted in every single neighborhood</p>
<p>Fundamentally, pushing feasible biophilic designs at the forefront of urban planning will certainly help to reduce the loss of nature at the expense of development.</p>
</section>
<section id="potential-future-work" class="level1">
<h1>Potential Future Work</h1>
<section id="urban-heat-island-effect" class="level4">
<h4 class="anchored" data-anchor-id="urban-heat-island-effect">Urban Heat Island Effect</h4>
<p>Urban heat island effect occurs when cities replace natural land cover with dense concentrations of pavement, buildings, and other surfaces that absorb and retain heat. which increases regional temperature and energy costs. There is a strong correlation between the loss of vegetation and the corresponding increase in urban heat temperature within the same area. In our future work, we can utilize the QGIS tools analyze the extent of land temperature change over 2018-2022 in relation to the increased loss in vegetation in JLD.</p>
</section>
<section id="macro-analysis-of-parks" class="level4">
<h4 class="anchored" data-anchor-id="macro-analysis-of-parks">Macro-Analysis of Parks</h4>
<p>As our current scope only covers Jurong Lake District, we can expand our analysis to study land cover change in other key areas identified by the Singapore Green Plan 2030. Under the City in Nature initiative, the government aims to increase nature parks’ land area by over 50% within 10 years. By incorporating the methods used in our study, we can supplement current knowledge by investigating trends in land cover change in newly planned nature park areas.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>